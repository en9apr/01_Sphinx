<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>1. How to Create a Virtual Machine &mdash; The Visual Room</title>
    
    <link rel="stylesheet" href="_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="The Visual Room" href="index.html" />
    <link rel="next" title="1. Version Control" href="git.html" />
    <link rel="prev" title="1.12. Programming Tips 1" href="programming_tips_1.html" /> 
  </head>
  <body>
      <div class="header"><h1 class="heading"><a href="index.html">
          <span>The Visual Room</span></a></h1>
        <h2 class="heading"><span>1. How to Create a Virtual Machine</span></h2>
      </div>
      <div class="topnav">
      
        <p>
        «&#160;&#160;<a href="programming_tips_1.html">1.12. Programming Tips 1</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="git.html">1. Version Control</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="how-to-create-a-virtual-machine">
<h1>1. How to Create a Virtual Machine<a class="headerlink" href="#how-to-create-a-virtual-machine" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#why-create-a-vm" id="id2">Why create a VM?</a><ul>
<li><a class="reference internal" href="#advantages" id="id3">Advantages</a></li>
<li><a class="reference internal" href="#disadvantages" id="id4">Disadvantages</a></li>
</ul>
</li>
<li><a class="reference internal" href="#process-of-creating-a-vm" id="id5">Process of Creating a VM</a><ul>
<li><a class="reference internal" href="#download-disk-image" id="id6">Download Disk Image</a></li>
<li><a class="reference internal" href="#create-a-new-virtualbox" id="id7">Create a New VirtualBox</a></li>
<li><a class="reference internal" href="#create-virtual-hard-drive" id="id8">Create Virtual Hard Drive</a></li>
<li><a class="reference internal" href="#install-operating-system" id="id9">Install Operating System</a></li>
<li><a class="reference internal" href="#change-the-settings-of-the-virtual-machine" id="id10">Change the Settings of the Virtual Machine</a></li>
<li><a class="reference internal" href="#run-updates-for-xubuntu" id="id11">Run Updates for Xubuntu</a></li>
<li><a class="reference internal" href="#install-dkms" id="id12">Install DKMS</a></li>
<li><a class="reference internal" href="#install-virtualbox-guest-additions" id="id13">Install VirtualBox Guest Additions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pass-through-folder" id="id14">Pass Through Folder</a></li>
<li><a class="reference internal" href="#how-to-fix-host-guest-copy-paste-issues" id="id15">How to Fix Host/Guest Copy Paste Issues</a></li>
<li><a class="reference internal" href="#snapshot-management" id="id16">Snapshot Management</a></li>
<li><a class="reference internal" href="#how-to-clone-vms" id="id17">How to Clone VMs</a></li>
<li><a class="reference internal" href="#adjust-network-adapter" id="id18">Adjust Network Adapter</a></li>
<li><a class="reference internal" href="#types-of-storage" id="id19">Types of Storage</a></li>
<li><a class="reference internal" href="#how-to-copy-vdi-files" id="id20">How to Copy vdi files</a></li>
<li><a class="reference internal" href="#software-and-customisation" id="id21">Software and Customisation</a></li>
</ul>
</div>
<div class="section" id="why-create-a-vm">
<h2><a class="toc-backref" href="#id2">1.1. Why create a VM?</a><a class="headerlink" href="#why-create-a-vm" title="Permalink to this headline">¶</a></h2>
<div class="section" id="advantages">
<h3><a class="toc-backref" href="#id3">1.1.1. Advantages</a><a class="headerlink" href="#advantages" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Can test software installations in a sandbox before use, can revert changes if it doesn&#8217;t work</li>
<li>Can give the virtual machine with the software to the client (so they don&#8217;t have to install anything to run the program)</li>
</ul>
</div>
<div class="section" id="disadvantages">
<h3><a class="toc-backref" href="#id4">1.1.2. Disadvantages</a><a class="headerlink" href="#disadvantages" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Need enough RAM: need twice the amount of memory of the VMs</li>
<li>Have to have enough disk space</li>
<li>Have to have 64-bit CPU with virtualisation extensions</li>
</ul>
</div>
</div>
<div class="section" id="process-of-creating-a-vm">
<h2><a class="toc-backref" href="#id5">1.2. Process of Creating a VM</a><a class="headerlink" href="#process-of-creating-a-vm" title="Permalink to this headline">¶</a></h2>
<div class="section" id="download-disk-image">
<h3><a class="toc-backref" href="#id6">1.2.1. Download Disk Image</a><a class="headerlink" href="#download-disk-image" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Download the .iso file (64 bit) e.g. xubuntu-14.04.2-desktop-amd64.iso</li>
</ul>
<p><a class="reference external" href="http://cdimages.ubuntu.com/xubuntu/releases/14.04/release/">Xubuntu Desktop</a></p>
<ul class="simple">
<li>Why Xubuntu:</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>It&#8217;s very lightweight</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="create-a-new-virtualbox">
<h3><a class="toc-backref" href="#id7">1.2.2. Create a New VirtualBox</a><a class="headerlink" href="#create-a-new-virtualbox" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Download and Install Oracle VirtualBox:</li>
</ul>
<p><a class="reference external" href="https://www.virtualbox.org/wiki/Downloads">Oracle VirtualBox</a></p>
<ul class="simple">
<li>Startup VirtualBox and create a new VM e.g.</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Name: Xubuntu 14.04.2 LTS 20GB</li>
<li>Type: Linux</li>
<li>Version: Xubuntu 64 bit</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="create-virtual-hard-drive">
<h3><a class="toc-backref" href="#id8">1.2.3. Create Virtual Hard Drive</a><a class="headerlink" href="#create-virtual-hard-drive" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Memory size (half of what is installed): 6GB</li>
<li>Select option: Create a virtual harddrive now</li>
<li>Select option: VirtualBox Disk Image (experience is that the other options don&#8217;t work any better)</li>
<li>Select option: Fixed size 20GB (so that we have enough space for Xubuntu and other updates)</li>
<li>Hit &#8220;Create&#8221; (might take about 10 minutes or so)</li>
</ul>
<p>You now have a virtual harddrive</p>
</div>
<div class="section" id="install-operating-system">
<h3><a class="toc-backref" href="#id9">1.2.4. Install Operating System</a><a class="headerlink" href="#install-operating-system" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>In VirtualBox &gt; Settings &gt; Storage &gt; IDE (Empty)<ul>
<li>Controller: IDE</li>
<li>Choose Ubuntu ISO Image</li>
</ul>
</li>
<li>In VirtualBox &gt; Start</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Select: Install Ubuntu</li>
<li>Don&#8217;t Select: Download updates while installing</li>
<li>Gave username and password</li>
<li>Select: Continue</li>
<li>Select: Install Now</li>
<li>Where are you? UK</li>
<li>Detect Keyboard</li>
<li>Continue</li>
<li>Yes to password protect login</li>
<li>When installation is complete:<ul>
<li>Select: Restart Now (it restarts and removes the CD automatically)</li>
<li>It asks whether the CD is removed - ensure CD is removed: Press Enter</li>
<li>It should restart</li>
</ul>
</li>
</ul>
</div></blockquote>
<p><strong>Snapshot taken at this point</strong></p>
</div>
<div class="section" id="change-the-settings-of-the-virtual-machine">
<h3><a class="toc-backref" href="#id10">1.2.5. Change the Settings of the Virtual Machine</a><a class="headerlink" href="#change-the-settings-of-the-virtual-machine" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>In VirtualBox &gt; Settings &gt; System<ul>
<li>12MB Video Memory is fine</li>
<li>Processor: change to 3 (needs virtualisation extensions)</li>
<li>Execution Cap: 100%</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="run-updates-for-xubuntu">
<h3><a class="toc-backref" href="#id11">1.2.6. Run Updates for Xubuntu</a><a class="headerlink" href="#run-updates-for-xubuntu" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>In VirtualBox &gt; Start</li>
<li>Run updates for Ubuntu</li>
</ul>
<div class="highlight-python"><div class="highlight"><pre>$ sudo apt-get update
</pre></div>
</div>
</div>
<div class="section" id="install-dkms">
<h3><a class="toc-backref" href="#id12">1.2.7. Install DKMS</a><a class="headerlink" href="#install-dkms" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Install Dynamic Kernel Module Support – otherwise everytime you update the kernel, you&#8217;ll have to update Guest Additions</li>
</ul>
<div class="highlight-python"><div class="highlight"><pre>$ sudo apt-get install dkms
</pre></div>
</div>
</div>
<div class="section" id="install-virtualbox-guest-additions">
<h3><a class="toc-backref" href="#id13">1.2.8. Install VirtualBox Guest Additions</a><a class="headerlink" href="#install-virtualbox-guest-additions" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Install Guest Additions, which gives enhanced mouse pointer and video control and installs Vbox Service.</li>
<li>In the VirtualBox environment: Devices &gt; Install Guest Additions (this opens a window, if not double click the CD mounted on the dekstop)</li>
<li>Double click autorun.sh and enter user&#8217;s password (this then installs Guest Additions)</li>
<li>Right click the CD on the desktop and eject the volume</li>
<li>Shut down the VM and restart it for Guest Additions to be installed</li>
</ul>
<p><strong>Snapshot taken at this point</strong></p>
</div>
</div>
<div class="section" id="pass-through-folder">
<h2><a class="toc-backref" href="#id14">1.3. Pass Through Folder</a><a class="headerlink" href="#pass-through-folder" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>I haven&#8217;t tried this, but there are loads of tutorials on this, the best one is this:</li>
</ul>
<p><a class="reference external" href="https://www.youtube.com/watch?v=1iUafW6g5o8">Pass Through Folder</a></p>
<ul class="simple">
<li>Obtain the name of the Ubuntu Box:</li>
</ul>
<div class="highlight-python"><div class="highlight"><pre>sudo nano /etc/hosts
</pre></div>
</div>
<p>(Could be VMUbuntu)</p>
<ul class="simple">
<li>In Xubuntu Guest Machine</li>
</ul>
<div class="highlight-python"><div class="highlight"><pre>$ sudo apt-get update
$ sudo apt-get samba
</pre></div>
</div>
<ul class="simple">
<li>In File Manager: Right click folder &gt; Share Folder (will install Samba)</li>
<li>Restart session</li>
<li>In Ubuntu Guest Machine</li>
</ul>
<div class="highlight-python"><div class="highlight"><pre>$ sudo gedit /etc/samba/smb.conf &amp;
</pre></div>
</div>
<ul class="simple">
<li>In that file add a line:</li>
</ul>
<div class="highlight-python"><div class="highlight"><pre>[global]

workgroup = WORKGROUP
force user = username (this is the username in Ubuntu VM)
</pre></div>
</div>
<ul class="simple">
<li>Restart Samba:</li>
</ul>
<div class="highlight-python"><div class="highlight"><pre>$ sudo restart smbd
</pre></div>
</div>
<ul class="simple">
<li>Right click folder &gt; Share Folder (Allow others to create and delete files).</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Create share</li>
<li>Create a file in Ubuntu to share</li>
</ul>
</div></blockquote>
<ul class="simple">
<li>In Windows Search:</li>
</ul>
<div class="highlight-python"><div class="highlight"><pre>\\VMUbuntu\Public
</pre></div>
</div>
<ul class="simple">
<li>In Windows Explorer &gt; Network (May need to turn on share and discovery)</li>
</ul>
</div>
<div class="section" id="how-to-fix-host-guest-copy-paste-issues">
<h2><a class="toc-backref" href="#id15">1.4. How to Fix Host/Guest Copy Paste Issues</a><a class="headerlink" href="#how-to-fix-host-guest-copy-paste-issues" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">In Virtual Box:</p>
<ul>
<li><p class="first">Settings &gt; General &gt; Advanced</p>
<blockquote>
<div><ul class="simple">
<li>Shared Clipboard: Bidirectional</li>
<li>Drag n&#8217; Drop: Bidirectional</li>
</ul>
</div></blockquote>
</li>
</ul>
</li>
<li><p class="first">If the version of Virtual Box is not up-to-date with respect to the Xubuntu version, this can sometimes not work, if not just update Virtual Box.</p>
</li>
</ul>
</div>
<div class="section" id="snapshot-management">
<h2><a class="toc-backref" href="#id16">1.5. Snapshot Management</a><a class="headerlink" href="#snapshot-management" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Useful for trial software installation. Remember: just running an operating system creates changes. We can&#8217;t restore while the machine is powered on.</li>
<li>In VirtualBox &gt; Snapshots:<ul>
<li>Right click &gt; Take snapshop</li>
<li>Right click &gt; Restore snapshot</li>
<li>Right click &gt; Delete snapshot (to remove large files)</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="how-to-clone-vms">
<h2><a class="toc-backref" href="#id17">1.6. How to Clone VMs</a><a class="headerlink" href="#how-to-clone-vms" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>How to give other people the VM? <strong>Clone it</strong> Can&#8217;t give just snapshot</li>
<li>Clone snapshot: Right click &gt; Clone</li>
</ul>
<p><strong>If you are going to be using the clone on the same network as the virtual machine check reinitilise the MAC address of all network cards – otherwise you will have multiple machines with the same MAC address and this will confuse the network.</strong></p>
<ul class="simple">
<li>Select: Full clone – so other people can use it</li>
<li>Select: Clone everything</li>
</ul>
<p>Can now give other people the .vdi file (the harddisk) and the .vbox. They can launch this directly in their copy of virtual box.</p>
</div>
<div class="section" id="adjust-network-adapter">
<h2><a class="toc-backref" href="#id18">1.7. Adjust Network Adapter</a><a class="headerlink" href="#adjust-network-adapter" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Use: NAT (allows Guest to use Internet)</li>
<li>Adapter Type: PCnet-Fast III (Am79C973)</li>
<li>Can randomise MAC address. 08002731A607 (if other VMs are somehow using the same address)</li>
</ul>
</div>
<div class="section" id="types-of-storage">
<h2><a class="toc-backref" href="#id19">1.8. Types of Storage</a><a class="headerlink" href="#types-of-storage" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>In VirtualBox: Settings &gt; Storage</li>
<li>Ubuntu uses SATA, CD uses IDE.</li>
</ul>
</div>
<div class="section" id="how-to-copy-vdi-files">
<h2><a class="toc-backref" href="#id20">1.9. How to Copy vdi files</a><a class="headerlink" href="#how-to-copy-vdi-files" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>File &gt; Virtual Media Manager</li>
<li>Differencing files are roughly equivalent to snapshots</li>
<li>.vdi files have unique identifiers – can&#8217;t just copy and paste</li>
<li><strong>If you want to copy a snapshot – you must use clone (as above)</strong></li>
<li>If you want to copy a VM (that isn&#8217;t a snapshot), you can use: File &gt; Virtual Media Manager &gt; Copy &gt; Next &gt; Next &gt; Next &gt; Give it a name &gt; Copy</li>
<li>To test the copy, you must add the .vdi file as a <strong>harddrive to a virtual machine</strong> (not just in the virtual machine manager)</li>
</ul>
</div>
<div class="section" id="software-and-customisation">
<h2><a class="toc-backref" href="#id21">1.10. Software and Customisation</a><a class="headerlink" href="#software-and-customisation" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>This is a list of software I&#8217;ve installed so far on the VM, plus additional customisation.</li>
</ul>
<div class="highlight-python"><div class="highlight"><pre># Guest Additions Installed

ran autorun.sh on Guest Additions CD

#OpenFOAM installed

VERS=$(lsb_release -cs)
sudo sh -c &quot;echo deb http://www.openfoam.org/download/ubuntu $VERS main &gt; /etc/apt/sources.list.d/openfoam.list&quot;
sudo apt-get update
sudo apt-get install openfoam231

# paraview installed

sudo apt-get install paraviewopenfoam410

# gedit installed and edited .bashrc to run OpenFOAM

sudo apt-get install gedit

# edited .bashrc

gedit ~/.bashrc
Added: source /opt/openfoam231/etc/bashrc
export FOAM_RUN=&#39;/home/andrew/OpenFOAM/andrew-2.3.1/run&#39;
export WORK=&#39;/home/andrew/OpenFOAM/andrew-2.3.1/run/tutorials/incompressible/icoFoam/cavity&#39;
export DOWNLOADS=&#39;/home/andrew/Downloads&#39;
export SPHINX=&#39;/home/andrew/Sphinx/thevisualroom&#39;

# sphinx
sudo apt-get install python-sphinx

# removed Pictures, Documents, Videos, Music, Templates, Public

# git
sudo apt-get install git
sudo apt-get install gitk               # to view git history

# filezilla
sudo apt-get install filezilla
</pre></div>
</div>
</div>
</div>


      </div>
      <div class="bottomnav">
      
        <p>
        «&#160;&#160;<a href="programming_tips_1.html">1.12. Programming Tips 1</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="git.html">1. Version Control</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer">
        &copy; Copyright 2015, Andrew Roberts.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
  </body>
</html>